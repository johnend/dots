Add tests for changed or untested code with meaningful implementation coverage.

Requirements:
- Focus on behavior and edge cases, not testing library internals.
- Keep test scope targeted to affected files.
- Prefer existing test patterns in this repository.
- Run only relevant tests unless asked to run all tests.

Output:
- Files added/updated
- Coverage summary (happy path, edge cases, error paths)
- Scoped test command and result
